<p id="notice"><%= notice %></p>


<ul class="nav justify-content-center">
  <li class="nav-item">
    <a class="nav-link active" href="#">All Produce</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="#">Fruit</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="#">Veggies</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="#">Legumes</a>
  </li>
</ul>

<div class="container_grid">
    <% @items.each do |item| %>
      <div class="item_box">
        <div ><%= image_tag item.image_url(:product_image), class: "item_img" %></div>
        <div style="font-weight: bolder;"><%= item.name %></div>
        <div><%= item.description %></div>
        <div style="font-weight: bolder;">$<%= item.price %></div>
        <%= link_to 'Show', item %>
        <%= link_to 'Edit', edit_item_path(item) %>
        <%= link_to 'Destroy', item, method: :delete, data: { confirm: 'Are you sure?' } %>

        <% if user_signed_in? %>

          <% if current_user.carts.count == 0 %>

          <%= render 'carts/form', cart: Cart.new(user_id: current_user.id, item_id: item.id), text_before: "Quantity: ", button_text: "add to cart"  %>

          <% end %>

          <% current_user.carts.each do |cart_object| %>


          <% if cart_object.item_id != item.id  %>

          <%= render 'carts/form', cart: Cart.new(user_id: current_user.id, item_id: item.id), text_before: "Quantity: ", button_text: "add to cart"  %>

          <% else  %>

          <%= render 'carts/form', cart: cart_object, text_before: "Already in cart (would you like to add more?):", button_text: "update cart" %>

          <% end %>
          <% end %>
        <% end %>
      </div>
    <% end %>
</div>


<br>

<%= link_to 'New Item', new_item_path %>
